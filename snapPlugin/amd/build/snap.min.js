define ("assignsubmission_snapPlugin/snap",["exports","jquery"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var c="edit",d=0,e=0,f=function(a,b,f,h){c=b;d=f;e=h;var i=document.createElement("textarea");i.innerHTML=a;g(i.value,c,d,e)};a.init=f;var g=function(a,b,c,d){var e=i(a,b,c,d);if(!a){a=j()}if(e){if(a){e.rawOpenProjectString(a)}if("embed"==b){m(e)}else if("edit"==b){var f=k().closest("form");l(f)}else{n()}o()}},h=function(a,b,f){if(!a){a=c}if(!b){b=d}if(!f){f=e}return document.getElementById("snap_#snapPluginName#-"+a+"-"+b+"-"+f)},i=function(a,b,c,d){var e=h(b,c,d);if(e){var f=e.contentWindow.world;if(!f){e.addEventListener("load",function(){g(a,b,c,d)},!0)}else{return f.children[0]}}},j=function(){var a="",b=k();if(b){a=k().value}return a},k=function(){return(0,b.default)("input[name=\"#snapPluginName#_xmlproject\"]")[0]},l=function(a){a.addEventListener("submit",p)},m=function(a){a.setEmbedMode();a.toggleAppMode(!0);n()},n=function(){var a=h();a.contentWindow.onbeforeunload=null},o=function(){var a=h();a.contentWindow.IDE_Morph.prototype.sourceSnapMenu=a.contentWindow.IDE_Morph.prototype.snapMenu;a.contentWindow.IDE_Morph.prototype.snapMenu=function(){this.sourceSnapMenu();var a=this.world().activeMenu;a.addLine();a.addItem("#snapPluginApp# embedded in Moodle");a.popup(this.world(),this.logo.bottomLeft())};a.contentWindow.IDE_Morph.prototype.cloudMenu=function(){this.showMessage("Cloud unavailable from this Moodle server")}},p=function(){var a=k(),b=i(a);a.value=b.serializer.serialize(b.stage);n()}});
//# sourceMappingURL=snap.min.js.map
